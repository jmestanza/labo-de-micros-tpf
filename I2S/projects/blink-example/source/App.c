/***************************************************************************//**
  @file     App.c
  @brief    Application functions
  @author   Nicolás Magliola
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/

#include "board.h"
#include "gpio.h"
#include "i2s.h"
#include "DMA.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/


/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/
// 4294967295 = 0x FF FF FF FF
// 2694881440 = 0x A0 A0 A0 A0

static uint32_t data[] = {0,4294967295, 0 , 4294967295, 0 , 2694881440};


/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

/* Función que se llama 1 vez, al comienzo del programa */
void App_Init (void)
{
    //gpioMode(PIN_LED_BLUE, OUTPUT);
    i2s_init();
    DMA0_Config(funcallback);
    DMA0_ConfigPingPongBuffer(N, L, &data[0], i2s_get_transfer_fifo_reg_address(0));
}

/* Función que se llama constantemente en un ciclo infinito */
void App_Run (void)
{
	bool right = true;
	for(int i = 0 ; i< 10 ; i++){
		i2s_send_data( 10, !right); // lots of faith in this
		i2s_send_data( 15, right);
	}
	//i2s_send_data(2947526575); // 0xAFAFAFAF
}


/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/
