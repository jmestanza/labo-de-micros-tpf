/***************************************************************************//**
  @file     App.c
  @brief    Application functions
  @author   Nicolás Magliola
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/

#include "board.h"
#include "gpio.h"
#include "i2s.h"
#include "DMA.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/


/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/
// 4294967295 = 0x FF FF FF FF
// 2694881440 = 0x A0 A0 A0 A0

static uint32_t data[] = {4294967295, 0 , 2694881440, 0 }; // 2 * N = 4 = sizeof(data)


/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

void process(void){ // this function is called when DMA has transfered one block (half of the total)

}



/* Función que se llama 1 vez, al comienzo del programa */


void App_Init (void)
{
    //gpioMode(PIN_LED_BLUE, OUTPUT);
    i2s_init();
    DMA0_Config(process);
    DMA0_ConfigPingPongBuffer(sizeof(data)/2, 4, &data[0], i2s_get_transfer_fifo_reg_address());
    DMA0_EnableRequest();
}



/* Función que se llama constantemente en un ciclo infinito */
void App_Run (void)
{
}


/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/
